# Environment Configuration for sgChat
#
# This file documents all environment variables needed for the sgChat stack.
# Copy this to .env and update values for your deployment.
#
# Recommended Subdomain Setup (via Nginx Proxy Manager):
#   - api.yourdomain.com     -> port 3040 (API + Socket.IO)
#   - files.yourdomain.com   -> port 3043 (MinIO S3)
#   - livekit.yourdomain.com -> port 3045 (Voice WebSocket)
#   - push.yourdomain.com    -> port 3048 (ntfy notifications)
#   - minio.yourdomain.com   -> port 3044 (MinIO Console, optional)

# Server
NODE_ENV=production
PORT=3000
HOST=0.0.0.0
LOG_LEVEL=info

# Security
JWT_SECRET=CHANGE_THIS_TO_A_RANDOM_STRING_IN_PRODUCTION
JWT_REFRESH_SECRET=CHANGE_THIS_TO_ANOTHER_RANDOM_STRING
CORS_ORIGIN=http://localhost:5174,https://chat.yourdomain.com

# Database
DATABASE_URL=postgresql://sgchat:sgchat_password@postgres:5432/sgchat
POSTGRES_USER=sgchat
POSTGRES_PASSWORD=sgchat_password
POSTGRES_DB=sgchat

# Development: Reset database on every container restart
# Set to "true" to wipe and recreate the database schema on each startup
# WARNING: This deletes ALL data! Only use during active development.
# Set to "false" or remove when you need data persistence.
RESET_DB_ON_STARTUP=true

# Redis
REDIS_URL=redis://redis:6379

# LiveKit (Voice/Video)
# IMPORTANT: These keys MUST match what's in docker/livekit.yaml under "keys:"
# The default keys below match the defaults in livekit.yaml
LIVEKIT_API_KEY=e5f39c91e7a67a8eb3404ecda50a7e31
LIVEKIT_API_SECRET=jaGcQ6wso+aQK4EGDOU+fSRBY1SPUVTQuSCKJ2X2bRQ=
# LIVEKIT_URL is internal Docker network URL (server-to-server)
LIVEKIT_URL=ws://livekit:7880
# LIVEKIT_PUBLIC_URL is the browser-accessible URL
# Use ws:// for non-SSL, wss:// if you have SSL termination on port 3045
LIVEKIT_PUBLIC_URL=ws://chat.yourdomain.com:3045

# MinIO (S3-compatible storage)
# Files are accessed via https://files.yourdomain.com when using NPM
MINIO_ENDPOINT=minio:9000
MINIO_ACCESS_KEY=sgchat_admin
MINIO_SECRET_KEY=sgchat_minio_secret_key_change_me
MINIO_BUCKET=sgchat-files
MINIO_PUBLIC_URL=https://files.yourdomain.com

# ntfy (Push notifications)
# NTFY_URL is internal, NTFY_BASE_URL is public-facing
NTFY_URL=http://ntfy:80
NTFY_BASE_URL=https://push.yourdomain.com

# Email / SMTP Configuration (for password reset emails)
# Default: Mailgun (free tier: 100 emails/day)
# Sign up at mailgun.com, verify domain, get SMTP credentials
SMTP_HOST=smtp.mailgun.org
SMTP_PORT=587
SMTP_USER=postmaster@your-domain.mailgun.org
SMTP_PASS=your-mailgun-smtp-password
SMTP_FROM=noreply@yourdomain.com
APP_URL=https://chat.yourdomain.com
